![logo](https://eliasdh.com/assets/media/images/logo-github.png)
# ðŸ’™ðŸ¤Uptime KumaðŸ¤ðŸ’™

## ðŸ“˜Table of Contents

1. [ðŸ“˜Table of Contents](#ðŸ“˜table-of-contents)
2. [ðŸ––Introduction](#ðŸ––introduction)
3. [âœ¨Steps](#âœ¨steps)
    1. [ðŸ‘‰Step 1: Update and upgrade the system](#ðŸ‘‰step-1-update-and-upgrade-the-system)
    2. [ðŸ‘‰Step 2: Set time zone](#ðŸ‘‰step-2-set-time-zone)
    3. [ðŸ‘‰Step 3: Network](#ðŸ‘‰step-3-network)
    4. [ðŸ‘‰Step 4: Set the SSH banner](#ðŸ‘‰step-4-set-the-ssh-banner)
    5. [ðŸ‘‰Step 5: Install Uptime Kuma](#ðŸ‘‰step-5-install-uptime-kuma)
    6. [ðŸ‘‰Step 6: Set Up Uptime Kuma as a Systemd Service](#ðŸ‘‰step-6-set-up-uptime-kuma-as-a-systemd-service)
    7. [ðŸ‘‰Step 7: Small modifications to source code](#ðŸ‘‰step-7-small-modifications-to-source-code)
4. [ðŸ”—Links](#ðŸ”—links)

---

## ðŸ––Introduction

This document describes the steps to install Uptime Kuma on a Ubuntu 24.04 server. Not with Docker but with the manual installation.

## âœ¨Steps

### ðŸ‘‰Step 1: Update and upgrade the system
```bash
sudo apt update && sudo apt upgrade -y
sudo do-release-upgrade # Optional
```

### ðŸ‘‰Step 2: Set time zone
```bash
sudo timedatectl set-timezone Europe/Brussels
```

### ðŸ‘‰Step 3: Network

- Configure the network interfaces of the servers.
```bash
sudo nano /etc/netplan/01-netcfg.yaml
```
```yaml
network:
  version: 2
  ethernets:
    enx00e04c3604a9:
      dhcp4: no
      dhcp6: no
      addresses:
        - 192.168.1.203/24
      nameservers:
        addresses:
          - 192.168.1.120
          - 8.8.8.8
      routes:
        - to: default
          via: 192.168.1.1
```
```bash
sudo chmod 600 /etc/netplan/01-netcfg.yaml
sudo netplan apply
```

- Set the hostname of the servers.
```bash
sudo hostnamectl set-hostname UptimeKuma
```

- Add the hostnames to the `/etc/hosts` file.
```bash
echo -e "127.0.0.1 localhost\n192.168.1.203 UptimeKuma" | sudo tee /etc/hosts > /dev/null
```

### ðŸ‘‰Step 4: Set the SSH banner
```bash
sudo nano /etc/motd
```

```text
??????????????????????????????????????????JJJJJJJJJJJJJJJJ??????????????????????????????????????????
??????????????????????????????????JJJJJ???77!!!~~~~~~!!77???JJJJ????????????????????????????????????
??????????????????????????????JJJ??7~^::..               ..:^^~7??JJJ???????????????????????????????
???????????????????????????JJJ7!^:                              .:^!7JJJ????????????????????????????
????????????????????????JJ?7~:                                       :~7?J??????????????????????????
??????????????????????JJ?~:                                             .~?JJ???????????????????????
????????????????????J?!:.                                                 .~?JJ?????????????????????
??????????????????JJ7:                                                       ^7J????????????????????
?????????????????J?^                     ..:^~~~~~~~~^::.                      ~?J??????????????????
????????????????J!.                  .:~7???JJJJJJJJJJJ??7!~:.                  .7J?????????????????
??????????????J?^                 :^!?JJJ????????????????JJJJ?!^.                 ~J????????????????
?????????????J?:                ^7?JJ?????????????????????????JJ?~.                ~J???????????????
????????????J?:               :7JJ????????JJJ????????JJJJ????????J?!.               ~J??????????????
????????????J^              .~?J????????J?7~:.......:^~!7??????????J?^               ~J?????????????
???????????J!               7J????????J?~.              .^7??????????J~               7J????????????
??????????J?.              !J????????J7.             .^!???????????JJJ?.              :?????????????
??????????J~              ^J????????J!            :~7?JJ???????JJJ?7~:                 ?J???????????
???????????.              7J???????J7         .^~7?JJ???????JJ??!^.                .:~7?????????????
?????????J7              .????????J?.      .^!?JJJ??????JJJ?!~:                 :~!?JJJ?????????????
???????????.             .????????J^    :~7?JJ???????JJ?7~:.                .^!7?JJ?????????????????
???????????.             .?????????..:!??JJ??????JJJ?!^.                .^!7?JJJ????????????????????
??????????J^              7J?????????JJJ?????JJJ?7~:.               .:~7?JJJ???????JJ???????????????
??????????J!              7J??????????????JJ?7!^.               .:~7?JJJ???????JJJ?7~::?????????????
????????????.           :!J???????????????7^:                :~!?JJJ????????JJ??!^.   :?????????????
???????????J^       .^!??J?????????????J!.               :~!??JJ????????JJJ?7~:       7J????????????
???????????J7   .:~7?JJJ??????JJJ????????7~:.        .^!??JJJ???????JJJ?7~:.         :J?????????????
?????????????!!!?JJJ???????JJJ?77?JJJ????JJJ?77777777?JJJ???????JJJ?7~:.             7J?????????????
?????????????JJJ????????JJ?7~:.  .:!?JJJ?????JJJJJJJJ??????JJJ??7~:.                ~J??????????????
?????????????????????JJ?7~:          :~7?JJJJ????????JJJJJ?7!^:.                   ^J???????????????
???????????????????J?7~.                .:~7?????????77~^:.                       ~?????????????????
??????????????????J!.                        .::::::.                           :7J?????????????????
????????????????????~.                                                        ^!?J??????????????????
????????????????????J?~.                                                   :~7JJ????????????????????
??????????????????????J?7^                                              .~7?JJ??????????????????????
????????????????????????JJ?~:                                        :~7?JJ?????????????????????????
??????????????????????????JJ?7~^.                                .^!7?JJ????????????????????????????
?????????????????????????????JJJ??7!~^::..                 ..:^!7?JJJ???????????????????????????????
?????????????????????????????????JJJJJJ???77!~~~~~~~!!!!!77??JJJJ???????????????????????????????????
??????????????????????????????????????????JJJJJJJJJJJJJJJJJ?????????????????????????????????????????
????????????????????????????????????????????????????????????????????????????????????????????????????
------------------------------
Welcome to server [UptimeKuma]
------------------------------
```

### ðŸ‘‰Step 5: Install Uptime Kuma

- Install nodejs and npm.
```bash
sudo apt install -y curl
curl -fsSL https://deb.nodesource.com/setup_21.x | sudo -E bash -
sudo apt install -y nodejs npm
```

- Test the installation
```bash
node -v
npm -v
```

- Download & Install Uptime Kuma.
```bash
sudo apt install git
cd /
git clone https://github.com/louislam/uptime-kuma.git
cd uptime-kuma
sudo rm -r CONTRIBUTING.md LICENSE SECURITY.md CODE_OF_CONDUCT.md README.md .gitignore
sudo rm -r .github .git docker test
npm install
```

- Start Uptime Kuma.
```bash
npm run build
```

### ðŸ‘‰Step 6: Set Up Uptime Kuma as a Systemd Service

- Create a new user for Uptime Kuma.
```bash
sudo useradd -m -s /bin/bash uptime-kuma-user
echo "uptime-kuma-user:123" | sudo chpasswd
sudo id uptime-kuma-user

sudo chown -R uptime-kuma-user:uptime-kuma-user /uptime-kuma
sudo chmod -R 755 /uptime-kuma
```


- Create a new systemd service file.
```bash
sudo nano /etc/systemd/system/uptime-kuma.service
```

- Add the following content.
```ini
[Unit]
Description=Uptime Kuma
After=network.target

[Service]
WorkingDirectory=/uptime-kuma
ExecStart=/usr/bin/npm run start
Restart=always
User=uptime-kuma-user
Group=uptime-kuma-user
Environment=NODE_ENV=production
Environment=PORT=3001

[Install]
WantedBy=multi-user.target
```

- Reload the systemd daemon and start the Uptime Kuma service.
```bash
sudo systemctl daemon-reload
sudo systemctl enable uptime-kuma.service
sudo systemctl start uptime-kuma.service
```

- Check the status of the Uptime Kuma service.
```bash
sudo systemctl status uptime-kuma.service
```

- Check the logs of the Uptime Kuma service.
```bash
journalctl -u uptime-kuma.service
```

- Go to the Uptime Kuma dashboard `http://localhost:3001`.

- Stop the Uptime Kuma service.
```bash
sudo systemctl stop uptime-kuma.service
# sudo systemctl restart uptime-kuma.service
```

- Disable the Uptime Kuma service.
```bash
sudo systemctl disable uptime-kuma.service
```

### ðŸ‘‰Step 7: Small modifications to source code

- Open the file in the `uptime-kuma` directory.
```bash
sudo nano /uptime-kuma/src/router.js
```

```js
{
    path: "/",
    component: Entry,
},
// To
{
    path: "/",
    redirect: "/status/main", // Makes "/" point to "/status/main"
},
{
    path: "/status/main",
    component: StatusPage, // Status page component
},
```

- Open the file in the `uptime-kuma` directory.
```bash
sudo nano /uptime-kuma/server/server.js
```

```js
response.redirect("/dashboard");
// To
response.redirect("/status/main");
```

- Save the file and restart the Uptime Kuma service.
```bash
sudo systemctl restart uptime-kuma.service
```

## ðŸ”—Links
- ðŸ‘¯ Web hosting company [EliasDH.com](https://eliasdh.com).
- ðŸ“« How to reach us info@eliasdh.com